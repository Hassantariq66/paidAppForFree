<style>
    .carousel-inner > .item > img,
    .carousel-inner > .item > a > img {
        width: 40%;
        margin: auto;
    }
</style>
@model FreeAppsDownload.Models.ApplicationAndComment
@using FreeAppsDownload.Models
<script src="~/Scripts/jquery-2.1.4.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/bootstrap-rating-input.min.js"></script>
<link href="~/Content/flaty.bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<script src="~/Scripts/jquery.fancybox.js"></script>
<script src="~/Scripts/jquery.fancybox.pack.js"></script>
<link href="~/Content/jquery.fancybox.css" rel="stylesheet" />
<script src="~/Scripts/jquery.fancybox-thumbs.js"></script>
<script src="~/Scripts/FancyBox/jquery.mousewheel-3.0.6.pack.js"></script>
<link href="~/Content/style.css" rel="stylesheet" />

<link href="~/Content/jquery.fancybox-thumbs.css" rel="stylesheet" />
<link href="~/Content/jquery.fancybox-buttons.css" rel="stylesheet" />
<script>

    function check()
    {
        var rating = document.getElementById("rating").value;
        var rate = document.getElementById("rate");
        if(rating>0)
        {
            rate.innerHTML("please Rate!");
            return false;
        }
        return true;
    }

    $(document).ready(function () {
        $("#fancybox-manual-c").click(function () {
           
            $.fancybox.open([
                {
                    href: '@Url.Content(Model.application.image1)',
                    title: 'First'
                }, {
                    href: '@Url.Content(Model.application.image2)',
                    title: 'Second'
                }, {
                    href: '@Url.Content(Model.application.image3)',
                    title: 'Third'
                }
            ], {
                openSpeed: "slow",
                openEffect :'elastic',
                closeEffect: 'elastic',
                nextEffect: 'elastic',
                prevEffect: 'elastic',
                helpers: {
                    
                    overlay : {
                        closeClick : true,  // if true, fancyBox will be closed when user clicks on the overlay
                        speedOut   : 200,   // duration of fadeOut animation
                        showEarly  : true,  // indicates if should be opened immediately or wait until the content is ready
                        css        : {},    // custom CSS properties
                        locked     : true   // if true, the content will be locked into overlay
                    },
                    title : {
                        type : 'float' // 'float', 'inside', 'outside' or 'over'
                    },
                    thumbs: {
                        autoPlay: true,
                        openSpeed:"slow",
                        close  : [27], // escape key
                        play   : [32], // space - start/stop slideshow
                        toggle : [70] , // letter "f" - toggle fullscreen
                        width: 75,
                        height: 50
                    }
                }
            });
        });
    });</script>

<div class="container">

    @{
        List<Category> cat = null;
        if (Session["category"] != null)
        {
            cat = (List<Category>)Session["category"];
        }
    }


    <div class="sub-cate">

            <div class=" top-nav sidebar span_1_of_left">
                <h3 class="cate">CATEGORIES</h3>
                <ul class="menu">
                    <li class="item1">
                        <a href="#">Android<img class="arrow-img" style="float:right;margin-top:20px" src="~/images/arrow1.png" alt="" /> </a>
                        <ul class="cute">

                            @{
                                var OS = "android";
                            }
                            @if (cat != null)
                            {
                                foreach (Category c in cat)
                                {
                                    <li><a href="@Url.Action("ViewApps", "Home", new { os=OS ,cat=c.value})">@c.Category1</a></li>

                                }
                            }
                        </ul>
                    </li>
                    <li class="item2">
                        <!---->
                        <a href="#">Apple IOS<img class="arrow-img" style="float:right;margin-top:20px" src="~/images/arrow1.png" alt="" /></a>
                        <ul class="cute">
                            @{
                                OS = "ios";


                            }
                            @if (cat != null)
                            {
                                foreach (Category c in cat)
                                {
                                    <li><a href="@Url.Action("ViewApps", "Home", new { os=OS ,cat=c.value})">@c.Category1</a></li>

                                }
                            }
                        </ul>
                    </li>
                    <li class="item3">
                        <a href="#">Windows OS<img class="arrow-img" style="float:right;margin-top:20px" src="~/images/arrow1.png" alt="" /> </a>
                        <ul class="cute">
                            @{
                                OS = "wos";

                            }
                            @if (cat != null)
                            {
                                foreach (Category c in cat)
                                {
                                    <li><a href="@Url.Action("ViewApps", "Home", new { os=OS ,cat=c.value})">@c.Category1</a></li>

                                }
                            }
                        </ul>
                    </li>
                    <li class="item4">
                        <a href="#">Blackberry OS <img class="arrow-img" style="float:right;margin-top:20px" src="~/images/arrow1.png" alt="" /></a>
                        <ul class="cute">
                            @{
                                OS = "bbos";
                            }
                            @if (cat != null)
                            {
                                foreach (Category c in cat)
                                {
                                    <li><a href="@Url.Action("ViewApps", "Home", new { os=OS ,cat=c.value})">@c.Category1</a></li>

                                }
                            }
                        </ul>
                    </li>
                    <li class="item5">
                        <a href="#">BADA OS <img class="arrow-img" style="float:right;margin-top:20px" src="~/images/arrow1.png" alt="" /></a>
                        <ul class="cute">
                            @{
                                OS = "bos";
                            }
                            @if (cat != null)
                            {
                                foreach (Category c in cat)
                                {
                                    <li><a href="@Url.Action("ViewApps", "Home", new { os=OS ,cat=c.value})">@c.Category1</a></li>

                                }
                            }
                        </ul>
                    </li>
                </ul>
            </div>
        </div>





    <div class="single_top">
        <div class="thumbnail" >
            <div id="myCarousel" class="carousel slide" data-ride="carousel" style="background-color:#333333">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <img src="@Url.Content(Model.application.image1)" alt="Chania" style="max-height:400px">
                    </div>


                    <div class="item">
                        <img src="@Url.Content(Model.application.image2)" alt="Chania" style="max-height:400px">
                    </div>

                    <div class="item">
                        <img src="@Url.Content(Model.application.image3)" alt="Flower" style="max-height:400px">
                    </div>

                </div>

                <!-- Left and right controls -->
                <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            <!--<img  src="~/Images/flappy1.jpg"  class="img-responsive"  alt="">-->
            <div class="caption-full">
                <h4 class="pull-right">Free</h4>
                <h4>
                    <a id="fancybox-manual-c" href="javascript:;">@Model.application.name</a>
                </h4>
                <p> @Model.application.desc</p>
            </div>
                <div class="ratings">
                    <p class="pull-right"> <a href="@Url.Action("Download", "Home", new { id=Model.application.Id})"><input type="submit" value="Download" style="float:right; margin-top:-10px; box-sizing:border-box ;padding:.6em 0.8em ;background-color:#F97E76;display:inline-block; border:none;outline:none; border-color:#18bc9c ; color:#fff" /></a></p>
                    <!--<p class="pull-right">@Model.comment.Count reviews</p> -->
                    <p>

                        @{
                            var rating = 0;
                            try
                            {

                                foreach (Comment c in Model.comment)
                                {
                                    rating += c.rating;
                                }
                                rating /= Model.comment.Count;
                            }
                            catch (Exception ex)
                            {

                            }

                        }
                        @for (int i = 0; i < rating; i++)
                        {
                            <span class="glyphicon glyphicon-star"></span>
                        }
                        @for (int i = 0; i < 5 - rating; i++)
                        { <span class="glyphicon glyphicon-star-empty"></span>}
                        @rating stars
                    </p>
                </div>
            </div>

        <div class="well">
           
            <form class="navbar navbar-form" action="@Url.Action("submitComment","Home")" onsubmit="return check()" method="post">
                <textarea name="descr" style="width:100%; height:40%; margin-left:0px; height:89px; border-style:groove; border-color:none" placeholder="Write Review"></textarea><br/><br/>
				<input type="number" name="rating" id="rating" class="rating" />
                <p style="color:red" id="rate"><p>
				<input type="hidden" name="appid" value="@Model.application.Id"/>
				<input type="submit" value="Submit Review" style="float:right;box-sizing:border-box ;padding:.6em 0.8em ;background-color:#F97E76;display:inline-block; border:none;outline:none; border-color:#18bc9c ; color:#fff" />
            </form>
                <hr>
                @foreach(Comment c in Model.comment)
                { 
                   
                <div class="row">
                    <div class="col-md-12">
                        @if(Session["review"]!=null)
                        {
                            User user = (User)Session["review"];
                            if(c.username.Trim().Equals(user.username.Trim()))
                            { 
                                
                            <div class="alert alert-danger" role="alert">
                                You Have Already submitted Review Below is yours Review
                            </div>
                        
                            Session["review"] = null;
                            }
                        }

                        @for (int i = 0; i < c.rating;i++ )
                        {
                            <span class="glyphicon glyphicon-star"></span>
                        }
                        @for (int i = 0; i < 5 - c.rating;i++)
                        { 
                        <span class="glyphicon glyphicon-star-empty"></span>
                        }
                        @c.username
                        <span class="pull-right">@c.date</span>
                        <p>@c.descr</p>
                    </div>
                </div>

                    <hr>
                }
                

</div>
    </div>
  

        
    <div class="clearfix"> </div>
</div>
